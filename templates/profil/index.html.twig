{% extends 'base.html.twig' %}

{% block title %}Profil{% endblock %}

{% block body %}
    <div class="body-home">
		<div class="page-acceuil m-3">
			<div class="text-acceuil m-auto">
				<h1 class="text-center">Mon profil</h1>
                <div class="d-flex">
                    <img class="img-profil" src="{{asset('/build/avatar_piafs/')}}{{user.avatar}}" title="avatar Piafs Actifs" alt="avatar Piafs Actifs" height="150px">
                    <div class="w-50 d-flex m-auto flex-column" >
                        <h4 style="font-weight: bold">
						    {{ app.user.email }}
                        </h4>
                        <p>
                            {% if user.roles|json_encode == '["ROLE_ADMIN"]' %}
                                Administrateur
                            {% elseif user.roles|json_encode == '["ROLE_INTER"]' %}
                                Intervenant
                            {% else %}
                                Utilisateur
                            {% endif %}
                        </p>
                    </div>
                </div>
                <div class="card-actualite">
                    <div class="d-flex">
                        <p class='title-profil'>Nom :</p>
                        <p class='text-profil'>{{ user.lastname }}</p>
                    </div>
                     <div class="d-flex">
                        <p class='title-profil'>Prénom :</p>
                        <p class='text-profil'>{{ user.firstname }}</p>
                    </div>
                     <div class="d-flex">
                        <p class='title-profil'>Date de naissance :</p>
                        <p class='text-profil'>{{ user.birthdate ? user.birthdate|date('d/m/Y') : '' }}</p>
                    </div>
                     <div class="d-flex">
                        <p class='title-profil'>Tél :</p>
                        <p class='text-profil'>{{ user.phone }}</p>
                    </div>
                     <div class="d-flex">
                        <p class='title-profil'>Adresse :</p>
                        <p class='text-profil'>{{ user.address }}<br>{{ user.zipcode }} {{ user.city }}</p>
                    </div>
                    <a class='btn button1' href="{{ path('app_profil_edit', {'id': user.id}) }}">Modifier le profil</a>
                </div>
                <div class="card-actualite">
                    <h3 class="card-title">Mes adhérants</h3>
                    {% for adherant in user.childrens %}
                        <div class="d-flex">
                            <p class='title-profil'>{{adherant.name}} {{adherant.firstname}}</p>
                            <p class='text-profil'>{{ date().diff(date(adherant.birthdate)).format('%y') }} ans, ({{adherant.birthdate ? adherant.birthdate|date('d/m/Y') : ''}})<br>
                                <span class= {{adherant.isActive ? 'text-compte' : 'text-compte-2'}} >{{adherant.activeAt ? 'compte actif jusqu\'au '~ adherant.activeAt|date('d/m/Y') : 'compte inactif'}}</span>
                            </p>
                        </div>
                    {% endfor %}
                    <a class='btn button1' href="{{ path('app_children_new')}}">Ajouter un adhérant</a>
                </div>
			</div>
		</div>
	</div>
{% endblock %}
